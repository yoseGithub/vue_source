{"version":3,"file":"vue.js","sources":["../src/observer/array.js","../src/observer/dep.js","../src/observer/index.js","../src/state.js","../src/compiler/parse.js","../src/compiler/generate.js","../src/compiler/index.js","../src/observer/watcher.js","../src/vdom/patch.js","../src/lifecycle.js","../src/init.js","../src/vdom/index.js","../src/render.js","../src/index.js"],"sourcesContent":[" // 不能直接改写数组原方法，也就是不能直接 Array.prototype.push = fn 直接改写，这样数组原功能也会被覆盖掉\r\n// 需要通过 Object.create(Array.prototype) 来创建一个对象，通过原型链来获取到数组的方法\r\nlet oldArrayMethods = Array.prototype\r\n\r\nexport let arrayMethods = Object.create(Array.prototype)\r\n// 7个会改变原数组的方法，而其他诸如concat slice等都不会改变原数组\r\nlet methods = ['push', 'pop', 'shift', 'unshift', 'splice', 'reverse', 'sort']\r\n\r\n// AOP切片编程\r\nmethods.forEach(method => {\r\n    arrayMethods[method] = function (...args) {\r\n        // 有可能用户新增的数据是对象，也需要进行拦截，比如 vm._data.arr.push({a: 1})\r\n        let inserted\r\n        let ob = this.__ob__\r\n        switch (method) {\r\n            case 'push':\r\n            case 'unshift':\r\n                inserted = args\r\n                break;\r\n            case 'splice': // splice(0, 1, xxx)\r\n                inserted = args.slice(2)\r\n            default: break;\r\n        }\r\n\r\n        // 如果有值则需要使用 observeArray 方法，通过 Observer 中对每一项进行监控时，如果为数组则会在该数组属性上挂上数组遍历方法\r\n        if (inserted) {\r\n            ob.observeArray(inserted)\r\n        }\r\n\r\n        // 调用数组原有方法执行\r\n        const result = oldArrayMethods[method].call(this, ...args)\r\n        return result\r\n    }\r\n})\r\n","// dep存在的意义：watcher是为了监听，取值的时候会触发记录\r\nlet id= 0\r\n\r\nclass Dep {\r\n    constructor () {\r\n        this.id = id++\r\n        this.subs = [] // 属性要记住watcher\r\n    }\r\n    // 如果有报错可自行安装babel插件（@babel/plugin-proposal-class-properties），又或者在外部写成 Dep.target = null\r\n    static target = null\r\n    depend () {\r\n        // 让watcher记住dep\r\n        Dep.target.addDep(this) // this为渲染watcher\r\n    }\r\n    addSub (watcher) {\r\n        this.subs.push(watcher)\r\n    }\r\n    notify () {\r\n        this.subs.forEach(watcher => watcher.update)\r\n    }\r\n}\r\n\r\nexport function pushTarget (watcher) {\r\n    Dep.target = watcher\r\n}\r\n\r\nexport function popTarget (watcher) {\r\n    Dep.target = null\r\n}\r\n\r\nexport default Dep","import { arrayMethods } from './array.js'\r\nimport Dep from './dep.js'\r\n\r\nclass Observer {\r\n    constructor (value) { // value 最初为 data 传入的每一项数据\r\n        // 这一句是为了在 arrayMethods中可以使用 observeArray 方法，如果是数组，则会在数组上挂载一个 Observer 实例\r\n        // 在数组arrayMethods拦截中可以使用 observeArray 来对数组进行观测\r\n        Object.defineProperty(value, '__ob__', {\r\n            value: this,\r\n            enumerable: false, // 不能被枚举，否则会导致死循环\r\n            configurable: false // 不能删除此属性\r\n        })\r\n\r\n        // value可能是对象 也可能是数组，需要分开处理\r\n        if (Array.isArray(value)) {\r\n            // value.__ob__ = this\r\n\r\n            // 数组不用defineProperty来进行代理 性能不好\r\n            // 如果是数组，则将数组原型链指向被劫持后的数组，这样如果是改变数组的方法则会先被劫持，否则通过原型链使用数组方法\r\n            Object.setPrototypeOf(value, arrayMethods)\r\n            this.observeArray(value) // 原有数组中的对象\r\n            // value.__proto__ = arrayMethods // 同上，但这种写法非标准。个人文章：https://www.jianshu.com/p/28a0164b0d63\r\n        } else {\r\n            this.walk(value)\r\n        }\r\n    }\r\n    // 监控数组中是否为对象，如果是则进行劫持\r\n    observeArray (value) {\r\n        for (let i = 0; i < value.length; i++) {\r\n            observe(value[i])\r\n        }\r\n    }\r\n    walk (data) {\r\n        // 将对象中所有的key 重新用 defineProperty定义成响应式的\r\n        Object.keys(data).forEach((key) => {\r\n            defineReactive(data, key, data[key])\r\n        })\r\n    }\r\n}\r\n\r\nexport function defineReactive (data, key, value) { // vue2中数据嵌套不要过深，过深浪费性能\r\n    // value可能也是一个对象\r\n    observe(value) // 对结果递归拦截\r\n\r\n    let dep = new Dep() // 每次都会给属性创建一个dep\r\n    Object.defineProperty(data, key, { // 需要给每个属性都添加一个Dep\r\n        get () {\r\n            if (Dep.target) {\r\n                dep.depend() // 让这个属性自己的dep记住这个watcher\r\n            }\r\n            return value\r\n        },\r\n        set (newValue) {\r\n            // 值没变化，无需重新设置\r\n            if (newValue === value) return\r\n            observe(newValue) // 如果用户设置的是一个对象，就继续将用户设置的对象变成响应式的\r\n            value = newValue\r\n\r\n            dep.notify() // 通知 dep 中记录的 wathcer 让它去执行\r\n        }\r\n    })\r\n}\r\n\r\nexport function observe (data) {\r\n    if (typeof data !== 'object' || data == null) return\r\n\r\n    if (data.__ob__) return // 如果有__ob__，证明已经被观测了\r\n\r\n    // 通过类来实现对数据的观测，类可以方便拓展，会产生实例\r\n    return new Observer(data)\r\n}","import { observe } from './observer/index'\r\n\r\n// 初始化状态\r\nexport function initState (vm) {\r\n    // 将所有数据都定义在 vm 属性上，并且后续更改需要触发视图更新\r\n    const opts = vm.$options // 获取用户属性\r\n\r\n    // 加入options中有同名，查看属性的顺序：props -> methods -> data -> computed -> watch\r\n\r\n    // 如果有data属性，初始化数据\r\n    if (opts.data) {\r\n        initData(vm)\r\n    }\r\n\r\n    if (opts.methods) {\r\n        // 数据的初始化\r\n    }\r\n}\r\n\r\n// 数据代理\r\nfunction Proxy (vm, source, key) {\r\n    Object.defineProperty(vm, key, {\r\n        get () {\r\n            return vm[source][key]\r\n        },\r\n        set (newValue) {\r\n            vm[source][key] = newValue\r\n        }\r\n    })\r\n}\r\n\r\n// 初始化数据\r\nfunction initData (vm) {\r\n    // 数据劫持 Object.defineProperty\r\n    let data = vm.$options.data\r\n\r\n    // data 有可能是个对象，也可能是个函数，如果是个函数，获取函数返回值作为对象\r\n    data = vm._data = typeof data === 'function' ? data.call(vm) : data // 这里最开头的data暂时没看出来有什么用\r\n\r\n    // 通过 vm._data 获取劫持后的数据，用户就可以拿到 _data 了\r\n    // 将 _data 中的数据全部放到 vm 上\r\n    for (let key in data) {\r\n        Proxy(vm, '_data', key)\r\n    }\r\n\r\n    // 观测数据\r\n    observe(data)\r\n}","// 生成AST语法树\r\n// 直接从github上源码搬运过来的正则 https://github.com/vuejs/vue/blob/edf7df0c837557dd3ea8d7b42ad8d4b21858ade0/packages/vue-template-compiler/build.js#L270\r\nconst ncname = '[a-zA-Z_][\\\\w\\\\-\\\\.]*' // 匹配标签名\r\nconst qnameCapture = \"((?:\" + ncname + \"\\\\:)?\" + ncname + \")\" // 匹配带前缀的标签名 <aa:span>，有命名空间的标签\r\nconst startTagOpen = new RegExp((\"^<\" + qnameCapture))\r\nconst endTag = new RegExp((\"^<\\\\/\" + qnameCapture + \"[^>]*>\"))\r\n// 例如 style     =     \"xxx\" 或 style=\"xxx\" 或 style='xxx' 或 style=xxx\r\n// 这里估计版本有更改，如果不需要捕获=号，则改成/^\\s*([^\\s\"'<>\\/=]+)(?:\\s*=\\s*(?:\"([^\"]*)\"+|'([^']*)'+|([^\\s\"'=<>`]+)))?/\r\nconst attribute = /^\\s*([^\\s\"'<>\\/=]+)(?:\\s*(=)\\s*(?:\"([^\"]*)\"+|'([^']*)'+|([^\\s\"'=<>`]+)))?/\r\nconst startTagClose = /^\\s*(\\/?)>/\r\n\r\n// 解析未处理的剩余html（处理完则前进，仅保留尚未处理的html，直到完全处理完）\r\nexport function parseHTML (html) {\r\n    // vue3里面支持多个根元素（外层加了一个空元素），vue2中只有一个根节点\r\n    function createASTElment (tag, attrs) {\r\n        return {\r\n            tag, // 标签\r\n            type: 1, // 元素类型，1为节点，3为文本\r\n            children: [], // 子节点\r\n            attrs, // 属性\r\n            parent: null // 父节点\r\n        }\r\n    }\r\n\r\n    let root = null\r\n    let currentParent // 当前处理的节点\r\n    let stack = [] // 栈\r\n\r\n    // 根据开始标签、结束标签、文本内容，生成AST语法书\r\n    function start (tagName, attrs) {\r\n        let element = createASTElment(tagName, attrs)\r\n        // 创建树根\r\n        if (!root) {\r\n            root = element\r\n        }\r\n        currentParent = element\r\n        stack.push(element)\r\n    }\r\n\r\n    // 栈处理，这里没写异常处理，可以判断标签是否正常闭合，是否有多余标签等\r\n    function end (tagName) {\r\n        let element = stack.pop()\r\n        currentParent = stack[stack.length - 1]\r\n        // 双指针（父子互相记录）\r\n        if (currentParent) {\r\n            element.parent = currentParent\r\n            currentParent.children.push(element)\r\n\r\n        }\r\n    }\r\n\r\n    \r\n    function chars (text) {\r\n        text = text.replace(/\\s/g, '') // 去除空格，源码是更改为一个空格，这里为了好判断直接全部去掉\r\n        if (text) {\r\n            currentParent.children.push({\r\n                type: 3,\r\n                text\r\n            })\r\n        }\r\n    }\r\n\r\n    // 前进，为了减少解析，需要在解析后则删除掉（前进一段）\r\n    function advance (n) {\r\n        html = html.substring(n)\r\n    }\r\n\r\n    // 解析起始标签\r\n    function parseStartTag () {\r\n        const start = html.match(startTagOpen)\r\n        if (start) {\r\n            let match = {\r\n                tagName: start[1],\r\n                attrs: []\r\n            }\r\n\r\n            advance(start[0].length) // 截取至<div\r\n\r\n            // 查找属性\r\n            let end, attr\r\n            // 不是开头标签结尾并且有属性值\r\n            // !(end = html.match(startTagClose) 这里是赋值跟返回放在一起，相当于先赋值end = html.match(startTagClose，再判断end\r\n            while(!(end = html.match(startTagClose)) && (attr = html.match(attribute))) {\r\n                advance(attr[0].length)\r\n\r\n                match.attrs.push({\r\n                    name: attr[1],\r\n                    value: attr[3] || attr[4] || attr[5] || true // 可能是 a=\"1\" a='1' a=1，都没有则为true，比如 disabled 等同于 disabled=\"true\"\r\n                })\r\n            }\r\n\r\n            if (end) {\r\n                advance(end[0].length)\r\n                return match\r\n            }\r\n        }\r\n    }\r\n\r\n    while (html) {\r\n        let textEnd = html.indexOf('<')\r\n        // 匹配的 < 号有可能是开始标签，也可能是结束标签\r\n        if (textEnd === 0) {\r\n            // 开始标签\r\n            let startTagMatch = parseStartTag(html)\r\n            if (startTagMatch) {\r\n                start(startTagMatch.tagName, startTagMatch.attrs)\r\n                continue\r\n            }\r\n            \r\n            // 结束标签，不需要解析获取，只用于前进即可\r\n            let endTagMatch = html.match(endTag)\r\n            if (endTagMatch) {\r\n                advance(endTagMatch[0].length)\r\n                end(endTagMatch[1])\r\n                continue\r\n            }\r\n        }\r\n\r\n        let text\r\n        if (textEnd > 0) { // 开始解析文本(有可能是文本，也可能是标签换行留下的空白)\r\n            text = html.substring(0, textEnd)\r\n        }\r\n\r\n        if (text) {\r\n            advance(text.length)\r\n            chars(text)\r\n        }\r\n    }\r\n\r\n    return root\r\n}","// 匹配出html字符串，根据标签创建输出render字符串函数\r\nconst defaultTagRE = /\\{\\{((?:.|\\r?\\n)+?)\\}\\}/g\r\n\r\nfunction genProps (attrs) {\r\n    let str = ''\r\n    for (let i = 0; i < attrs.length; i++) {\r\n        let attr = attrs[i]\r\n\r\n        // 如果有行内样式，例如 style=\"color: red\"\r\n        if (attr.name === 'style') {\r\n            let obj = {}\r\n            attr.value.split(';').forEach(item => {\r\n                let [key, value] = item.split(':')\r\n                obj[key] = value\r\n            })\r\n            attr.value = obj\r\n        }\r\n\r\n        // 由于字符串拼接，attr.value 会丢失 双引号（或单引号），{id: app}，这样待会解析就变成变量了\r\n        // 所以需要使用JSON.stringify重新将字符串补充上引号 {id: \"app\"}\r\n        str += `${attr.name}: ${JSON.stringify(attr.value)},` // _c('div', {id: \"app\",class: \"wrap\",style: {\"background-color\":\" pink\"}})\r\n    }\r\n\r\n    return `{${str.slice(0, -1)}}` // 去除最后多余的逗号\r\n}\r\n\r\nfunction genChildren(el) {\r\n    const children = el.children\r\n    if (children) {\r\n        return children.map(child => gen(child)).join(',')\r\n    }\r\n}\r\n\r\n// 区分是元素还是文本\r\nfunction gen(node) {\r\n    if (node.type === 1) {\r\n        return generate(node)\r\n    } else {\r\n        // 文本不能用_c来处理\r\n        // 有{{}} 普通文本 混合文本（前两者集合）\r\n        const text = node.text\r\n        // 是鬓语法\r\n        if (defaultTagRE.test(text)) {\r\n            let tokens = [] // 混合文本存放\r\n            let match\r\n            let index = 0\r\n            let lastIndex = defaultTagRE.lastIndex = 0 // lastIndex获取匹配后指针的位置，由于上面用过一次test，所以指针不已经不是0开始了，需要重置为0\r\n\r\n            while(match = defaultTagRE.exec(text)) {\r\n                index = match.index\r\n                if (index > lastIndex) {\r\n                    tokens.push(JSON.stringify(text.slice(lastIndex, index)))\r\n                }\r\n                tokens.push(`_s(${match[1].trim()})`)\r\n                lastIndex = index + match[0].length\r\n            }\r\n\r\n            if (lastIndex < text.length) {\r\n                tokens.push(JSON.stringify(text.slice(lastIndex)))\r\n            }\r\n            return `_v(${tokens.join('+')})`\r\n        } else { // 普通文本\r\n            return `_v(${JSON.stringify(text)})`\r\n        }\r\n    }\r\n}\r\n\r\n// 创建元素\r\nexport function generate (el) {\r\n    let children = genChildren(el)\r\n\r\n    // 转换成render代码，这里看不懂需要先移步去学习相关文档：createElement https://cn.vuejs.org/v2/guide/render-function.html\r\n    // _c('div', {id: \"app\",class: \"wrap\",style: {\"background-color\":\" pink\"}})\r\n    let code = `_c('${el.tag}', ${\r\n        el.attrs.length ? genProps(el.attrs) : 'undefined'\r\n    }${\r\n        children ? ',' + children : ''\r\n    })`\r\n\r\n    return code\r\n}\r\n","// 用于执行 render 字符串\r\nimport { parseHTML } from './parse.js'\r\nimport { generate } from './generate.js'\r\n\r\nexport function compileToFunctions (template) {\r\n    const ast = parseHTML(template)\r\n\r\n    // 源码中还会标记静态节点，转成js语法\r\n    const code = generate(ast) // 生成代码\r\n\r\n    // 不同于eval,with是动态的插入当前的词法作用域，所以可以在外部将Vue传入，这样就能获取到对应的属性\r\n    const render = `with(this){return ${code}}`\r\n    const fn = new Function(render)\r\n    return fn\r\n}\r\n","// watcher 记住dep是为了计算属性和让用户调用\r\nimport { popTarget, pushTarget } from \"./dep\"\r\n\r\nlet id = 0\r\n\r\nclass Watcher {\r\n    constructor (vm, exprOrFn, cb, options) {\r\n        this.vm = vm\r\n        this.cb = cb\r\n        this.id = id++ // 不同组件id都不一样\r\n        this.options = options\r\n        this.getter = exprOrFn // 调用传入的函数\r\n        this.deps = [] // watcher 里也要记住dep\r\n        this.depsId = new Set()\r\n\r\n        this.get()\r\n    }\r\n    // 这个方法中会对属性进行取值操作\r\n    get () {\r\n        pushTarget(this) // Dep.target = watcher\r\n        this.getter() // 取值\r\n        popTarget()\r\n    }\r\n    // 当属性取值时，需要记住这个watcher，稍后数据变化了，去执行自己记住的watcher即可\r\n    addDep (dep) {\r\n        let id = dep.id\r\n        if (!this.depsId.has(id)) { // dep是非重复的\r\n            this.depsId.add(id)\r\n            this.deps.push(dep)\r\n            dep.addSub(this)\r\n        }\r\n    }\r\n    update () {\r\n        this.get()\r\n    }\r\n}\r\n\r\nexport default Watcher","// 将虚拟节点转换成真实节点\r\nexport function patch(oldVnode, newVnode) {\r\n    // oldVnode 第一次是一个真实的元素，也就是#app\r\n    const isRealElement = oldVnode.nodeType\r\n\r\n    if (isRealElement) {\r\n        // 初次渲染\r\n        const oldElm = oldVnode // id=\"app\"\r\n        const parentElm = oldElm.parentNode // body\r\n        const el = createdElm(newVnode) // 根据虚拟节点创建真实节点\r\n        // 将创建的节点插入到原有节点的下一个，因为不比vue template，index.html除了入口还可能有其他元素\r\n        parentElm.insertBefore(el, oldElm.nextSibling)\r\n        parentElm.removeChild(oldElm)\r\n        return el // vm.$el\r\n    } else {\r\n        // diff算法\r\n\r\n    }\r\n}\r\n\r\nfunction createdElm (vnode) { // 根据虚拟节点创建真实节点，不同于createElement\r\n    let { vm, tag, data, key, children, text } = vnode\r\n    \r\n\r\n    if (typeof tag === 'string') {\r\n        // 可能是组件\r\n        vnode.el = document.createElement(tag) // 用vue的指令时，可以通过vnode拿到真实dom\r\n        updateProperties(vnode)\r\n        children.forEach(child => {\r\n            vnode.el.appendChild(createdElm(child)) // 递归创建插入节点，现代浏览器appendChild并不会插入一次回流一次\r\n        })\r\n    } else {\r\n        vnode.el = document.createTextNode(text)\r\n    }\r\n\r\n    return vnode.el\r\n}\r\n\r\n// 更新属性，注意这里class与style无法处理表达式，因为从前面解析的时候就没处理，还是那句，重点不在完全实现，而是学习核心思路\r\nfunction updateProperties (vnode) {\r\n    const newProps = vnode.data || {}\r\n    const el = vnode.el\r\n\r\n    for (let key in newProps) {\r\n        if (key === 'style') {\r\n            for (let styleName in newProps.style) {\r\n                el.style[styleName] = newProps.style[styleName]\r\n            }\r\n        } else if (typeof tag === 'class') { // 静态的class可以没有这段，但还是写上，假装如果是class可以处理简单的表达式\r\n            vnode.className = newProps.class\r\n        } else {\r\n            el.setAttribute(key, newProps[key])\r\n        }\r\n    }\r\n}","import Watcher from './observer/watcher.js'\r\nimport { patch } from './vdom/patch.js'\r\n\r\nexport function lifecycleMixin (Vue) {\r\n    // 视图更新方法，用于渲染真实DOM\r\n    Vue.prototype._update = function (vnode) {\r\n        const vm = this\r\n\r\n        // 首次渲染，需要用虚拟节点，来更新真实的dom元素\r\n        // 第一次渲染完毕后 拿到新的节点，下次再次渲染时替换上次渲染的结果\r\n        vm.$options.el = patch(vm.$options.el, vnode)\r\n    }\r\n}\r\n\r\nexport function mountComponent (vm, el) {\r\n    let updateComponent = () => {\r\n        vm._update(vm._render()) // vm._render()返回虚拟节点，update返回真实节点\r\n    }\r\n\r\n    // 默认vue是通过watcher来渲染的 渲染watcher（每一个组件都有一个渲染watcher）\r\n    new Watcher(vm, updateComponent, () => {}, true)\r\n}","import { initState } from './state'\r\nimport { compileToFunctions } from './compiler/index.js'\r\nimport { mountComponent } from './lifecycle.js'\r\n\r\n// 通过原型混合的方式，往vue的原型添方法\r\nexport function initMixin (Vue) {\r\n    Vue.prototype._init = function (options) {\r\n        const vm = this\r\n        // 实例上有个属性 $options ，表示的是用户传入的所有属性\r\n        vm.$options = options\r\n\r\n        // 初始化状态\r\n        initState(vm)\r\n\r\n        // 数据可以挂载到页面上\r\n        if (vm.$options.el) {\r\n            vm.$mount(vm.$options.el)\r\n        }\r\n    }\r\n\r\n    Vue.prototype.$mount = function (el) {\r\n        el = document.querySelector(el)\r\n        const vm = this\r\n        const options = vm.$options\r\n        vm.$options.el = el\r\n\r\n        // 如果有render 就直接使用 render\r\n        // 没有render 看有没有template属性\r\n        // 没有template 就接着找外部模板\r\n        if (!options.render) {\r\n            let template = options.template\r\n            if (!template && el) {\r\n                // 返回内容包含描述元素及其后代的序列化HTML片段，火狐不兼容，可以使用document。createElement('div').appendChild('app').innerHTML来获取\r\n                template = el.outerHTML\r\n            }\r\n            const render = compileToFunctions(template)\r\n            options.render = render // 通过这个步骤，统一为render\r\n        }\r\n\r\n        mountComponent(vm, el) // 组件挂载\r\n    }\r\n}","// 创建 Dom虚拟节点\r\nexport function createdElement (vm, tag, data = {}, ...children) {\r\n    return vnode(vm, tag, data, data.key, children, undefined)\r\n}\r\n\r\n// 创建文本虚拟节点\r\nexport function createTextVnode (vm, text) {\r\n    return vnode(vm, undefined, undefined, undefined, undefined, text)\r\n}\r\n\r\nfunction vnode (vm, tag, data, key, children, text) {\r\n    return {\r\n        vm,\r\n        tag,\r\n        children,\r\n        data,\r\n        key,\r\n        text\r\n    }\r\n}","import { createdElement, createTextVnode } from './vdom/index.js'\r\n\r\nexport function renderMixin (Vue) {\r\n    // 为什么要写在prototype上？因为render中传入this，也就是只能在vue中的方法和变量才能被获取到\r\n    Vue.prototype._c = function (...args) { // 创建元素虚拟节点\r\n        return createdElement(this, ...args)\r\n    }\r\n\r\n    Vue.prototype._v = function (text) { // 创建元文本拟节点\r\n        return createTextVnode(this, text)\r\n    }\r\n\r\n    Vue.prototype._s = function (value) { // 鬓语法转化成字符串\r\n        // 如果值是个对象，输出成对象字符串，否则输出值\r\n        return value == null ? '' : (typeof value === 'object') ? JSON.stringify(value) : value\r\n    }\r\n\r\n    // 用于执行自定义render方法\r\n    Vue.prototype._render = function () {\r\n        const vm = this\r\n        const render = vm.$options.render // 获取编译后的render方法\r\n\r\n        // 调用render方法产生虚拟节点\r\n        const vnode = render.call(vm) // 调用时会自动将变量进行取值\r\n        return vnode\r\n    }\r\n}","import { initMixin } from './init.js'\r\nimport { lifecycleMixin } from './lifecycle.js'\r\nimport { renderMixin } from './render.js'\r\n\r\nfunction Vue (options) {\r\n    this._init(options)\r\n}\r\n\r\ninitMixin(Vue) // 扩展初始化方法\r\nlifecycleMixin(Vue) // 扩展 _updata 方法\r\nrenderMixin(Vue) // 扩展 _render 方法\r\n\r\nexport default Vue"],"names":["oldArrayMethods","Array","prototype","arrayMethods","Object","create","methods","forEach","method","inserted","ob","__ob__","args","slice","observeArray","result","call","id","Dep","subs","target","addDep","watcher","push","update","pushTarget","popTarget","Observer","value","defineProperty","enumerable","configurable","isArray","setPrototypeOf","walk","i","length","observe","data","keys","key","defineReactive","dep","get","depend","set","newValue","notify","initState","vm","opts","$options","initData","Proxy","source","_data","ncname","qnameCapture","startTagOpen","RegExp","endTag","attribute","startTagClose","parseHTML","html","createASTElment","tag","attrs","type","children","parent","root","currentParent","stack","start","tagName","element","end","pop","chars","text","replace","advance","n","substring","parseStartTag","match","attr","name","textEnd","indexOf","startTagMatch","endTagMatch","defaultTagRE","genProps","str","obj","split","item","JSON","stringify","genChildren","el","map","child","gen","join","node","generate","test","tokens","index","lastIndex","exec","trim","code","compileToFunctions","template","ast","render","fn","Function","Watcher","exprOrFn","cb","options","getter","deps","depsId","Set","has","add","addSub","patch","oldVnode","newVnode","isRealElement","nodeType","oldElm","parentElm","parentNode","createdElm","insertBefore","nextSibling","removeChild","vnode","document","createElement","updateProperties","appendChild","createTextNode","newProps","styleName","style","className","setAttribute","lifecycleMixin","Vue","_update","mountComponent","updateComponent","_render","initMixin","_init","$mount","querySelector","outerHTML","createdElement","undefined","createTextVnode","renderMixin","_c","_v","_s"],"mappings":"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"}